# Stat Mutex Aliases
# Rust Async-std
alias rust_stat_mutex_async_std_100='timejsonloop 10 rust_stat_mutex_async_std_100.json make task_count=100 rust_stat_mutex_async_std'
alias rust_stat_mutex_async_std_1000='timejsonloop 10 rust_stat_mutex_async_std_1000.json make task_count=1000 rust_stat_mutex_async_std'
alias rust_stat_mutex_async_std_10000='timejsonloop 10 rust_stat_mutex_async_std_10000.json make task_count=10000 rust_stat_mutex_async_std'
alias rust_stat_mutex_async_std_100000='timejsonloop 10 rust_stat_mutex_async_std_100000.json make task_count=100000 rust_stat_mutex_async_std'
alias rust_stat_mutex_async_std_1000000='timejsonloop 10 rust_stat_mutex_async_std_1000000.json make task_count=1000000 rust_stat_mutex_async_std'

# Rust Rayon
alias rust_stat_mutex_rayon_100='timejsonloop 10 rust_stat_mutex_rayon_100.json make task_count=100 rust_stat_mutex_rayon'
alias rust_stat_mutex_rayon_1000='timejsonloop 10 rust_stat_mutex_rayon_1000.json make task_count=1000 rust_stat_mutex_rayon'
alias rust_stat_mutex_rayon_10000='timejsonloop 10 rust_stat_mutex_rayon_10000.json make task_count=10000 rust_stat_mutex_rayon'
alias rust_stat_mutex_rayon_100000='timejsonloop 10 rust_stat_mutex_rayon_100000.json make task_count=100000 rust_stat_mutex_rayon'
alias rust_stat_mutex_rayon_1000000='timejsonloop 10 rust_stat_mutex_rayon_1000000.json make task_count=1000000 rust_stat_mutex_rayon'

# Rust Threads
alias rust_stat_mutex_threads_100='timejsonloop 10 rust_stat_mutex_threads_100.json make thread_count=100 rust_stat_mutex_threads'
alias rust_stat_mutex_threads_1000='timejsonloop 10 rust_stat_mutex_threads_1000.json make thread_count=1000 rust_stat_mutex_threads'
alias rust_stat_mutex_threads_10000='timejsonloop 10 rust_stat_mutex_threads_10000.json make thread_count=10000 rust_stat_mutex_threads'

# Rust Tokio
alias rust_stat_mutex_tokio_100='timejsonloop 10 rust_stat_mutex_tokio_100.json make task_count=100 rust_stat_mutex_tokio'
alias rust_stat_mutex_tokio_1000='timejsonloop 10 rust_stat_mutex_tokio_1000.json make task_count=1000 rust_stat_mutex_tokio'
alias rust_stat_mutex_tokio_10000='timejsonloop 10 rust_stat_mutex_tokio_10000.json make task_count=10000 rust_stat_mutex_tokio'
alias rust_stat_mutex_tokio_100000='timejsonloop 10 rust_stat_mutex_tokio_100000.json make task_count=100000 rust_stat_mutex_tokio'
alias rust_stat_mutex_tokio_1000000='timejsonloop 10 rust_stat_mutex_tokio_1000000.json make task_count=1000000 rust_stat_mutex_tokio'


# Stat Message Aliases
# Rust Tokio
alias rust_stat_message_tokio_100='timejsonloop 10 rust_stat_message_tokio_100.json make task_count=100 rust_stat_message_tokio'
alias rust_stat_message_tokio_1000='timejsonloop 10 rust_stat_message_tokio_1000.json make task_count=1000 rust_stat_message_tokio'
alias rust_stat_message_tokio_10000='timejsonloop 10 rust_stat_message_tokio_10000.json make task_count=10000 rust_stat_message_tokio'
alias rust_stat_message_tokio_100000='timejsonloop 10 rust_stat_message_tokio_100000.json make task_count=100000 rust_stat_message_tokio'
alias rust_stat_message_tokio_1000000='timejsonloop 10 rust_stat_message_tokio_1000000.json make task_count=1000000 rust_stat_message_tokio'

# Rust Threads
alias rust_stat_message_threads_100='timejsonloop 10 rust_stat_message_threads_100.json make thread_count=100 rust_stat_message_threads'
alias rust_stat_message_threads_1000='timejsonloop 10 rust_stat_message_threads_1000.json make thread_count=1000 rust_stat_message_threads'
alias rust_stat_message_threads_10000='timejsonloop 10 rust_stat_message_threads_10000.json make thread_count=10000 rust_stat_message_threads'


# Hash Mutex Aliases
# Rust Async-std
alias rust_hash_mutex_async_std_100='timejsonloop 10 rust_hash_mutex_async_std_100.json make task_count=100 rust_hash_mutex_async_std'
alias rust_hash_mutex_async_std_1000='timejsonloop 10 rust_hash_mutex_async_std_1000.json make task_count=1000 rust_hash_mutex_async_std'
alias rust_hash_mutex_async_std_10000='timejsonloop 10 rust_hash_mutex_async_std_10000.json make task_count=10000 rust_hash_mutex_async_std'
alias rust_hash_mutex_async_std_100000='timejsonloop 10 rust_hash_mutex_async_std_100000.json make task_count=100000 rust_hash_mutex_async_std'
alias rust_hash_mutex_async_std_1000000='timejsonloop 10 rust_hash_mutex_async_std_1000000.json make task_count=1000000 rust_hash_mutex_async_std'

# Rust Rayon
alias rust_hash_mutex_rayon_100='timejsonloop 10 rust_hash_mutex_rayon_100.json make task_count=100 rust_hash_mutex_rayon'
alias rust_hash_mutex_rayon_1000='timejsonloop 10 rust_hash_mutex_rayon_1000.json make task_count=1000 rust_hash_mutex_rayon'
alias rust_hash_mutex_rayon_10000='timejsonloop 10 rust_hash_mutex_rayon_10000.json make task_count=10000 rust_hash_mutex_rayon'
alias rust_hash_mutex_rayon_100000='timejsonloop 10 rust_hash_mutex_rayon_100000.json make task_count=100000 rust_hash_mutex_rayon'
alias rust_hash_mutex_rayon_1000000='timejsonloop 10 rust_hash_mutex_rayon_1000000.json make task_count=1000000 rust_hash_mutex_rayon'

# Rust Threads
alias rust_hash_mutex_threads_100='timejsonloop 10 rust_hash_mutex_threads_100.json make thread_count=100 rust_hash_mutex_threads'
alias rust_hash_mutex_threads_1000='timejsonloop 10 rust_hash_mutex_threads_1000.json make thread_count=1000 rust_hash_mutex_threads'
alias rust_hash_mutex_threads_10000='timejsonloop 10 rust_hash_mutex_threads_10000.json make thread_count=10000 rust_hash_mutex_threads'

# Rust Tokio
alias rust_hash_mutex_tokio_100='timejsonloop 10 rust_hash_mutex_tokio_100.json make task_count=100 rust_hash_mutex_tokio'
alias rust_hash_mutex_tokio_1000='timejsonloop 10 rust_hash_mutex_tokio_1000.json make task_count=1000 rust_hash_mutex_tokio'
alias rust_hash_mutex_tokio_10000='timejsonloop 10 rust_hash_mutex_tokio_10000.json make task_count=10000 rust_hash_mutex_tokio'
alias rust_hash_mutex_tokio_100000='timejsonloop 10 rust_hash_mutex_tokio_100000.json make task_count=100000 rust_hash_mutex_tokio'
alias rust_hash_mutex_tokio_1000000='timejsonloop 10 rust_hash_mutex_tokio_1000000.json make task_count=1000000 rust_hash_mutex_tokio'

# Hash Message Aliases
# Rust Tokio
alias rust_hash_message_tokio_100='timejsonloop 10 rust_hash_message_tokio_100.json make task_count=100 rust_hash_message_tokio'
alias rust_hash_message_tokio_1000='timejsonloop 10 rust_hash_message_tokio_1000.json make task_count=1000 rust_hash_message_tokio'
alias rust_hash_message_tokio_10000='timejsonloop 10 rust_hash_message_tokio_10000.json make task_count=10000 rust_hash_message_tokio'
alias rust_hash_message_tokio_100000='timejsonloop 10 rust_hash_message_tokio_100000.json make task_count=100000 rust_hash_message_tokio'
alias rust_hash_message_tokio_1000000='timejsonloop 10 rust_hash_message_tokio_1000000.json make task_count=1000000 rust_hash_message_tokio'

# Rust Threads
alias rust_hash_message_threads_100='timejsonloop 10 rust_hash_message_threads_100.json make thread_count=100 rust_hash_message_threads'
alias rust_hash_message_threads_1000='timejsonloop 10 rust_hash_message_threads_1000.json make thread_count=1000 rust_hash_message_threads'
alias rust_hash_message_threads_10000='timejsonloop 10 rust_hash_message_threads_10000.json make thread_count=10000 rust_hash_message_threads'


# Go
# Stat
alias go_stat_100='timejsonloop 10 go_stat_100.json make task_count=100 go_stat'
alias go_stat_1000='timejsonloop 10 go_stat_1000.json make task_count=1000 go_stat'
alias go_stat_10000='timejsonloop 10 go_stat_10000.json make task_count=10000 go_stat'
alias go_stat_100000='timejsonloop 10 go_stat_100000.json make task_count=100000 go_stat'
alias go_stat_1000000='timejsonloop 10 go_stat_1000000.json make task_count=1000000 go_stat'

# Hash
alias go_hash_100='timejsonloop 10 go_hash_100.json make task_count=100 go_hash'
alias go_hash_1000='timejsonloop 10 go_hash_1000.json make task_count=1000 go_hash'
alias go_hash_10000='timejsonloop 10 go_hash_10000.json make task_count=10000 go_hash'
alias go_hash_100000='timejsonloop 10 go_hash_100000.json make task_count=100000 go_hash'
alias go_hash_1000000='timejsonloop 10 go_hash_1000000.json make task_count=1000000 go_hash'


# Dotnet
alias net6_stat_100='timejsonloop 10 net6_stat_100.json make task_count=100 net6_stat'
alias net6_stat_1000='timejsonloop 10 net6_stat_1000.json make task_count=1000 net6_stat'
alias net6_stat_10000='timejsonloop 10 net6_stat_10000.json make task_count=10000 net6_stat'
alias net6_stat_100000='timejsonloop 10 net6_stat_100000.json make task_count=100000 net6_stat'
alias net6_stat_1000000='timejsonloop 10 net6_stat_1000000.json make task_count=1000000 net6_stat'

alias net7_stat_100='timejsonloop 10 net7_stat_100.json make task_count=100 net7_stat'
alias net7_stat_1000='timejsonloop 10 net7_stat_1000.json make task_count=1000 net7_stat'
alias net7_stat_10000='timejsonloop 10 net7_stat_10000.json make task_count=10000 net7_stat'
alias net7_stat_100000='timejsonloop 10 net7_stat_100000.json make task_count=100000 net7_stat'
alias net7_stat_1000000='timejsonloop 10 net7_stat_1000000.json make task_count=1000000 net7_stat'

async-runtime-benchmark() {
    rust_stat_mutex_async_std_100
    rust_stat_mutex_async_std_1000
    rust_stat_mutex_async_std_10000
    rust_stat_mutex_async_std_100000
    rust_stat_mutex_async_std_1000000

    rust_stat_mutex_rayon_100
    rust_stat_mutex_rayon_1000
    rust_stat_mutex_rayon_10000
    rust_stat_mutex_rayon_100000
    rust_stat_mutex_rayon_1000000

    rust_stat_mutex_threads_100
    rust_stat_mutex_threads_1000
    rust_stat_mutex_threads_10000

    rust_stat_mutex_tokio_100
    rust_stat_mutex_tokio_1000
    rust_stat_mutex_tokio_10000
    rust_stat_mutex_tokio_100000
    rust_stat_mutex_tokio_1000000

    rust_stat_message_threads_100
    rust_stat_message_threads_1000
    rust_stat_message_threads_10000

    rust_stat_message_tokio_100
    rust_stat_message_tokio_1000
    rust_stat_message_tokio_10000
    rust_stat_message_tokio_100000
    rust_stat_message_tokio_1000000

    rust_hash_mutex_async_std_100
    rust_hash_mutex_async_std_1000
    rust_hash_mutex_async_std_10000
    rust_hash_mutex_async_std_100000
    rust_hash_mutex_async_std_1000000

    rust_hash_mutex_rayon_100
    rust_hash_mutex_rayon_1000
    rust_hash_mutex_rayon_10000
    rust_hash_mutex_rayon_100000
    rust_hash_mutex_rayon_1000000

    rust_hash_mutex_threads_100
    rust_hash_mutex_threads_1000
    rust_hash_mutex_threads_10000

    rust_hash_mutex_tokio_100
    rust_hash_mutex_tokio_1000
    rust_hash_mutex_tokio_10000
    rust_hash_mutex_tokio_100000
    rust_hash_mutex_tokio_1000000

    rust_hash_message_threads_100
    rust_hash_message_threads_1000
    rust_hash_message_threads_10000

    rust_hash_message_tokio_100
    rust_hash_message_tokio_1000
    rust_hash_message_tokio_10000
    rust_hash_message_tokio_100000
    rust_hash_message_tokio_1000000

    go_stat_100
    go_stat_1000
    go_stat_10000
    go_stat_100000
    go_stat_1000000

    go_hash_100
    go_hash_1000
    go_hash_10000
    go_hash_100000
    go_hash_1000000 

    net6_stat_100
    net6_stat_1000
    net6_stat_10000
    net6_stat_100000
    net6_stat_1000000

    net7_stat_100
    net7_stat_1000
    net7_stat_10000
    net7_stat_100000
    net7_stat_1000000
}

timejson() {
  /usr/bin/time --quiet -a -o ${1} -f \
'{
   "involuntary_context_switches": %c,
   "real_time_formatted": "%E",
   "real_time_seconds": %e,
   "major_page_faults": %F,
   "avg_total_memory_use_kb": %K,
   "max_resident_set_kb": %M,
   "cpu_percentage": "%P",
   "minor_page_faults": %R,
   "system_time_seconds": %S,
   "user_time_seconds": %U,
   "voluntary_context_switches": %w,
   "file_system_outputs": %O,
   "average_resident_set_kb": %t,
   "file_system_inputs": %I,
   "exit_status": %x
},' ${2} ${3} ${4}
}

timejsonloop() {
  for i in $(seq 1 "$1");
do
  timejson "$2" "$3" "$4" "$5"
done
}